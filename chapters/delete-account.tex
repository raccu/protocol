\section{Delete account}
In this section a flow for deleting an account of the user is defined. 

    \subsection{Flow}
    Delete account flow is given in Figure~\ref{fig:deleteAccount} and defined as follows:
        \begin{enumerate}
            \item Mobile MUST request a verification code from the Auth by submitting the email address of the user
                  which is trying to delete the account.
            \item Upon receiving a request to delete an account, the Auth MUST dispatch an email with the verification
                  code to the Email.
            \item When the user enters verification code into the Mobile, the Mobile MUST send the email and signature 
                  of the email and verification code to the Auth to complete the process of deleting the account.
        \end{enumerate}
        \input{diagrams/sequence/delete-account.tex}
    
    \subsection{Successful account deletion}
    If account deletion is successful, the Mobile MUST delete any record of user's name, email, public key, and 
    private key. The Auth SHOULD delete any record of user's name, email, public key, and private key.

    \subsection{Unsuccessful account deletion}
    If account deletion fails for any reason related to the protocol, an attempt to delete an account MUST be discarded. 
    It is RECOMMENDED to log an attempt in order to screen a source of multiple invalid requests. Any of the following 
    reasons is considered to be related to the protocol:
        \begin{itemize}
            \item An email is not associated with any account.
            \item Verification code entered into Mobile does not match the expected verification code.
            \item The signature cannot be verified by the associated public key.
            \item The signature is invalid.
        \end{itemize}
    If account deletion fails for any other reason (e.g. network outage), an appropriate message SHOULD be dispatched or 
    left to other protocols for handling, should they offer such capability.
